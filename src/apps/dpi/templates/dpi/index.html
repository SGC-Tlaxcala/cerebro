{% extends 'base.html' %}
{% load staticfiles %}

{% block footer %}
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
    google.charts.load('current', {'packages':['corechart']})
    google.charts.setOnLoadCallback(pieTotal)
    google.charts.setOnLoadCallback(pieTlaxcala)

    function pieTotal() {
      const data = google.visualization.arrayToDataTable([
        ['Tipo', 'Expedientes'],
        ['DPI', {{ total_dpi.count }}],
        ['USI', {{ total_usi.count }}]
      ])

      const options = { legend: 'none' }

      const chart = new google.visualization.PieChart(document.getElementById('total_chart'))
      chart.draw(data, options)
    }

    function pieTlaxcala() {
      const data = google.visualization.arrayToDataTable([
        ['Tipo', 'Expedientes'],
        ['DPI', {{ tlaxcala_total_dpi.count }}],
        ['USI', {{ tlaxcala_total_usi.count }}]
      ])

      const options = { legend: 'none' }

      const chart = new google.visualization.PieChart(document.getElementById('tlaxcala_chart'))
      chart.draw(data, options)
    }

  </script>
{% endblock footer %}

{% block before_content %}

{% endblock before_content %}

{% block content %}
  <div class="row">
    <div class="col">
      <h1 class="display-3">Estadísticas DPI/USI <small class="text-muted">{{ year }}</small></h1>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <h3>Estadísticas totales</h3>
      <ul>
        <li><strong>Total de registros:</strong> {{ total.count }}</li>
        <li><strong>Total de registros DPI:</strong> {{ total_dpi.count }}</li>
        <li><strong>Total de registros USI:</strong> {{ total_usi.count }}</li>
      </ul>
      <div id="total_chart" style="min-width: 500px; width: 100px;"></div>
    </div>
    <div class="col">
      <h3>Estadísticas para Tlaxcala</h3>
      <ul>
        <li><strong>Total de registros:</strong> {{ tlaxcala.count }}</li>
        <li><strong>Total de registros DPI:</strong> {{ tlaxcala_total_dpi.count }}</li>
        <li><strong>Total de registros USI:</strong> {{ tlaxcala_total_usi.count }}</li>
      </ul>
      <div id="tlaxcala_chart" style="min-width: 500px; width: 100px;"></div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <h1 class="display-5">Estadísticas DPI <small class="text-muted">{{ 2017 }}</small></h1>
    </div>
  </div>
  <div class="row">
    <div class="col">
<ul class="nav nav-tabs" id="myTab" role="tablist" style="margin-bottom: 15px">
  <li class="nav-item">
    <a class="nav-link active" id="local-tab" data-toggle="tab" href="#local" role="tab" aria-controls="local" aria-selected="true">Estatal</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="apizaco-tab" data-toggle="tab" href="#apizaco" role="tab" aria-controls="apizaco" aria-selected="false">Distrito 1</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="tlaxcala-tab" data-toggle="tab" href="#tlaxcala" role="tab" aria-controls="tlaxcala" aria-selected="false">Distrito 02</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="zacatelco-tab" data-toggle="tab" href="#zacatelco" role="tab" aria-controls="zacatelco" aria-selected="false">Distrito 03</a>
  </li>
</ul>
<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="local" role="tabpanel" aria-labelledby="local-tab">

    <div class="row">
      <div class="col">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Card title</h5>
            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
          </div>
        </div>
      </div>

      <div class="col">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Card title</h5>
            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
          </div>
        </div>
      </div>

      <div class="col">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Card title</h5>
            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
          </div>
        </div>
      </div>
    </div>

  </div>
  <div class="tab-pane fade" id="apizaco" role="tabpanel" aria-labelledby="apizaco-tab">En el 01</div>
  <div class="tab-pane fade" id="tlaxcala" role="tabpanel" aria-labelledby="tlaxcala-tab">Estoy en el 02</div>
  <div class="tab-pane fade" id="zacatelco" role="tabpanel" aria-labelledby="zacatelco-tab">En Zacatelco</div>
</div>
    </div>
  </div>

{% endblock content %}


