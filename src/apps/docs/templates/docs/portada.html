{# docs/index.html #}
{% extends "base.html" %}

{% block content %}
  <div class="jumbotron p-3 p-md-5 rounded">
    <div class="col-md-6 px-0">
      <h1 class="display-5">Control de Documentos</h1>
    </div>
  </div>



  <div class="row">
    <div class="col">
      <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item">
          <a
            class="nav-link active show"
            id="pro-tab"
            role="tab"
            data-toggle="tab"
            aria-controls="pro"
            aria-selected="true"
            href="#pro">
            Procedimientos
          </a>
        </li>
        {% for tipo in tipos %}
        <li class="nav-item">
          <a
            class="nav-link"
            id="{{ tipo.slug }}-tab"
            role="tab"
            data-toggle="tab"
            aria-controls="{{ tipo.slug }}"
            aria-selected="false"
            href="#{{ tipo.slug }}">
            {{ tipo.tipo }}
          </a>
        </li>
        {% endfor %}
      </ul>
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="pro" role="tabpanel" aria-labelledby="pro-tab">
          <h3>Procedimientos y Documentación del SGC</h3>
          <div class="table-responsive">
            <table class="table table-striped table-bordered table-sm table-hover">
              <thead>
                <tr>
                  <th>Documento</th>
                  <th>Código</th>
                  <th>Revisión</th>
                  <th>Aprobación</th>
                </tr>
              </thead>
              <tbody>
                {% for doc in los_docs %}
                {% ifchanged doc.proceso %}
                <tr>
                  <td colspan="5" style="text-align: center;"><strong>{{doc.proceso}}</strong></td>
                </tr>
                {% endifchanged %}
                <tr>
                  <td>
                    <a href="{% url 'docs:detalle' doc.id %}">{{ doc.nombre }}</a>
                  </td>
                  <td>
                    {{ doc.clave|upper }}
                  </td>
                  {% if doc.r_actual %}
                    <td style="text-align: center;">{{ doc.r_actual }}</td>
                    <td>{{ doc.revision_actual.f_actualizacion|date:"M d, Y" }}</td>
                  {% else %}
                    <td colspan="3">
                      <a href="{% url "docs.views.agregar_control" doc=doc.id %}">
                        <i class="icon-plus-2"></i> Agregar una nueva revisión
                      </a>
                    </td>
                  {% endif %}
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div><!-- ./table-responsive -->
        </div><!-- ./#pro-tab -->
        <div class="tab-pane fade" id="fmt" role="tabpanel" aria-labelledby="fmt-tab">
          <h3>Formatos</h3>
          <div class="table-responsive">
            <table class="table table-striped table-bordered table-sm table-hover">
              <thead>
                <tr>
                  <th>Documento</th>
                  <th>Código</th>
                  <th>Revisión</th>
                  <th>Aprobación</th>
                </tr>
              </thead>
              <tbody>
                {% for doc in los_fmts %}
                {% ifchanged doc.proceso %}
                <tr>
                  <td colspan="5" style="text-align: center;"><strong>{{doc.proceso}}</strong></td>
                </tr>
                {% endifchanged %}
                <tr>
                  <td>
                    <a href="{% url 'docs:detalle' doc.id %}">{{ doc.nombre }}</a>
                  </td>
                  <td>
                    {{ doc.clave|upper }}
                  </td>
                  {% if doc.r_actual %}
                    <td style="text-align: center;">{{ doc.r_actual }}</td>
                    <td>{{ doc.revision_actual.f_actualizacion|date:"M d, Y" }}</td>
                  {% else %}
                    <td colspan="3">
                      <a href="{% url "docs.views.agregar_control" doc=doc.id %}">
                        <i class="icon-plus-2"></i> Agregar una nueva revisión
                      </a>
                    </td>
                  {% endif %}
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div><!-- ./table-responsive -->
        </div>
        <div class="tab-pane fade" id="int" role="tabpanel" aria-labelledby="int-tab">
          <h3>Instrucciones de trabajo</h3>
          <div class="table-responsive">
            <table class="table table-striped table-bordered table-sm table-hover">
              <thead>
                <tr>
                  <th>Documento</th>
                  <th>Código</th>
                  <th>Revisión</th>
                  <th>Aprobación</th>
                </tr>
              </thead>
              <tbody>
                {% for doc in los_docs %}
                {% ifchanged doc.proceso %}
                <tr>
                  <td colspan="5" style="text-align: center;"><strong>{{doc.proceso}}</strong></td>
                </tr>
                {% endifchanged %}
                <tr>
                  <td>
                    <a href="{% url 'docs:detalle' doc.id %}">{{ doc.nombre }}</a>
                  </td>
                  <td>
                    {{ doc.clave|upper }}
                  </td>
                  {% if doc.r_actual %}
                    <td style="text-align: center;">{{ doc.r_actual }}</td>
                    <td>{{ doc.revision_actual.f_actualizacion|date:"M d, Y" }}</td>
                  {% else %}
                    <td colspan="3">
                      <a href="{% url "docs.views.agregar_control" doc=doc.id %}">
                        <i class="icon-plus-2"></i> Agregar una nueva revisión
                      </a>
                    </td>
                  {% endif %}
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div><!-- ./table-responsive -->
        </div>
        <div class="tab-pane fade" id="externo" role="tabpanel" aria-labelledby="externo-tab">
          <h3>Documentos externos</h3>
          <div class="table-responsive">
            <table class="table table-striped table-bordered table-sm table-hover">
              <thead>
                <tr>
                  <th>Documento</th>
                  <th>Código</th>
                  <th>Revisión</th>
                  <th>Aprobación</th>
                </tr>
              </thead>
              <tbody>
                {% for doc in los_exts %}
                {% ifchanged doc.proceso %}
                <tr>
                  <td colspan="5" style="text-align: center;"><strong>{{doc.proceso}}</strong></td>
                </tr>
                {% endifchanged %}
                <tr>
                  <td>
                    <a href="{% url 'docs:detalle' doc.id %}">{{ doc.nombre }}</a>
                  </td>
                  <td>
                    {{ doc.clave|upper }}
                  </td>
                  {% if doc.r_actual %}
                    <td style="text-align: center;">{{ doc.r_actual }}</td>
                    <td>{{ doc.revision_actual.f_actualizacion|date:"M d, Y" }}</td>
                  {% else %}
                    <td colspan="3">
                      <a href="{% url "docs.views.agregar_control" doc=doc.id %}">
                        <i class="icon-plus-2"></i> Agregar una nueva revisión
                      </a>
                    </td>
                  {% endif %}
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div><!-- ./table-responsive -->
        </div>
        <div class="tab-pane fade" id="registros" role="tabpanel" aria-labelledby="registros-tab">
          <h3>Registros</h3>
          <div class="table-responsive">
            <table class="table table-striped table-bordered table-sm table-hover">
              <thead>
                <tr>
                  <th>Documento</th>
                  <th>Código</th>
                  <th>Revisión</th>
                  <th>Aprobación</th>
                </tr>
              </thead>
              <tbody>
                {% for doc in los_regs %}
                {% ifchanged doc.proceso %}
                <tr>
                  <td colspan="5" style="text-align: center;"><strong>{{doc.proceso}}</strong></td>
                </tr>
                {% endifchanged %}
                <tr>
                  <td>
                    <a href="{% url 'docs:detalle' doc.id %}">{{ doc.nombre }}</a>
                  </td>
                  <td>
                    {{ doc.clave|upper }}
                  </td>
                  {% if doc.r_actual %}
                    <td style="text-align: center;">{{ doc.r_actual }}</td>
                    <td>{{ doc.revision_actual.f_actualizacion|date:"M d, Y" }}</td>
                  {% else %}
                    <td colspan="3">
                      <a href="{% url "docs.views.agregar_control" doc=doc.id %}">
                        <i class="icon-plus-2"></i> Agregar una nueva revisión
                      </a>
                    </td>
                  {% endif %}
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div><!-- ./table-responsive -->
        </div>
        <div class="tab-pane fade" id="stn" role="tabpanel" aria-labelledby="stn-tab">
          <h3>Opiniones técnicas de la SNT</h3>
          <div class="table-responsive">
            <table class="table table-striped table-bordered table-sm table-hover">
              <thead>
                <tr>
                  <th>Documento</th>
                  <th>Código</th>
                  <th>Revisión</th>
                  <th>Aprobación</th>
                </tr>
              </thead>
              <tbody>
                {% for doc in las_stn %}
                {% ifchanged doc.proceso %}
                <tr>
                  <td colspan="5" style="text-align: center;"><strong>{{doc.proceso}}</strong></td>
                </tr>
                {% endifchanged %}
                <tr>
                  <td>
                    <a href="{% url 'docs:detalle' doc.id %}">{{ doc.nombre }}</a>
                  </td>
                  <td>
                    {{ doc.clave|upper }}
                  </td>
                  {% if doc.r_actual %}
                    <td style="text-align: center;">{{ doc.r_actual }}</td>
                    <td>{{ doc.revision_actual.f_actualizacion|date:"M d, Y" }}</td>
                  {% else %}
                    <td colspan="3">
                      <a href="{% url "docs.views.agregar_control" doc=doc.id %}">
                        <i class="icon-plus-2"></i> Agregar una nueva revisión
                      </a>
                    </td>
                  {% endif %}
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div><!-- ./table-responsive STN -->
        </div><!-- ./#stn-tab -->
        <div class="tab-pane fade" id="coc" role="tabpanel" aria-labelledby="coc-tab">
          <h3>Oficios y circulares de la COC</h3>
          <div class="table-responsive">
            <table class="table table-striped table-bordered table-sm table-hover">
              <thead>
                <tr>
                  <th>Documento</th>
                  <th>Código</th>
                  <th>Revisión</th>
                  <th>Aprobación</th>
                </tr>
              </thead>
              <tbody>
                {% for doc in los_coc %}
                {% ifchanged doc.proceso %}
                <tr>
                  <td colspan="5" style="text-align: center;"><strong>{{doc.proceso}}</strong></td>
                </tr>
                {% endifchanged %}
                <tr>
                  <td>
                    <a href="{% url 'docs:detalle' doc.id %}">{{ doc.nombre }}</a>
                  </td>
                  <td>
                    {{ doc.clave|upper }}
                  </td>
                  {% if doc.r_actual %}
                    <td style="text-align: center;">{{ doc.r_actual }}</td>
                    <td>{{ doc.revision_actual.f_actualizacion|date:"M d, Y" }}</td>
                  {% else %}
                    <td colspan="3">
                      <a href="{% url "docs.views.agregar_control" doc=doc.id %}">
                        <i class="icon-plus-2"></i> Agregar una nueva revisión
                      </a>
                    </td>
                  {% endif %}
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div><!-- ./table-responsive COC -->
        </div><!-- ./#coc tab -->
      </div>
    </div>
  </div>
{% endblock content %}